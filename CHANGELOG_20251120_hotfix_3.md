# Changelog 2025-11-20 (Hotfix 3)

## 🚀 效能優化：記憶體擴容與延遲加載

### 問題描述
1.  **記憶體不足 (OOM)**：原先 1GB 記憶體不足以支撐所有模型同時加載，導致進程被系統殺死 (`Out of memory: Killed process`)。
2.  **圖片裁切失敗**：由於模型加載耗時過長，Node.js 在 Python 伺服器尚未準備好時就發送請求，或因 OOM 導致服務重啟期間請求失敗。

### 修復內容
-   **記憶體擴容**：將 `fly.toml` 中的 VM 記憶體從 `1gb` 提升至 `2gb`。
-   **延遲加載 (Lazy Loading)**：修改 `server/table_recognition.py`，不再於啟動時一次性加載所有模型。
    -   `/crop` 請求現在只需加載輕量級的 `Pillow` 庫，可立即響應，不再受制於重型模型加載。
    -   `/recognize` 請求會在第一次被調用時才初始化 OCR 和表格識別模型。
    -   `/health` 檢查改為僅檢查服務存活狀態，不再強制要求模型已加載。

### 驗證
-   服務啟動速度應顯著提升（秒級啟動）。
-   `/crop` 功能應在服務啟動後立即可用。
-   執行表格識別時，記憶體使用量將上升，但應在 2GB 限制內穩定運行。
